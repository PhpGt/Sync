#!/usr/bin/env php
<?php

use Gt\Cli\Argument\CommandArgumentList;
use Gt\Sync\Command\SyncCommand;
use Gt\Cli\Application;

$autoloadLocations = [
	implode(DIRECTORY_SEPARATOR, [
		__DIR__,
		"..",
		"..",
		"..",
		"autoload.php",
	]),
	implode(DIRECTORY_SEPARATOR, [
		__DIR__,
		"..",
		"vendor",
		"autoload.php",
	]),
];

foreach($autoloadLocations as $location) {
	if(file_exists($location)) {
		require($location);
		break;
	}
}

$application = new Application(
	"Synchronise two directories",
	new CommandArgumentList("sync", ...$argv),
	new SyncCommand()
);
$application->run();
